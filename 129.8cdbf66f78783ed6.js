"use strict";(self.webpackChunkwinder=self.webpackChunkwinder||[]).push([[129],{7129:(D,h,i)=>{i.r(h),i.d(h,{SearchModule:()=>y});var p=i(6814),m=i(3403),t=i(9212),u=i(9046),d=i(6685),g=i(5619),C=google.maps.OverlayView;class f extends C{constructor(a,o,e){super(),this.markerDiv=null,this.latlng=a,this.html=o,this.onClickCallback=e}onAdd(){this.markerDiv=document.createElement("div"),this.markerDiv.innerHTML=this.html,this.markerDiv.className="winders-custom-marker",this.markerDiv.addEventListener("click",a=>{this.onClickCallback(this),a.stopPropagation()}),this.getPanes()?.overlayMouseTarget.appendChild(this.markerDiv)}draw(){const o=this.getProjection().fromLatLngToDivPixel(this.latlng);if(this.markerDiv){const e=o?.x??0,c=o?.y??0,s=5;this.markerDiv.style.left=e+-this.markerDiv.offsetWidth/2+"px",this.markerDiv.style.top=c+s+"px"}}getPosition(){return this.latlng}onRemove(){this.markerDiv&&(this.markerDiv.parentNode?.removeChild(this.markerDiv),this.markerDiv=null)}getAnchor(){return this}}var l=i(9025),M=google.maps.LatLng;const P=["infoWindow"];let O=(()=>{class n{constructor(o,e){this.productService=o,this.changeDetectorRef=e,this.carsList$=this.productService.getProducts(),this.mapInstance$=new g.X(null),this.mapInstance=null,this.selectedCar=null,this.mapOptions={disableDefaultUI:!0,zoom:8,center:{lat:35,lng:-120},zoomControl:!0},this.mapInstance$.subscribe(c=>{c&&(this.mapInstance=c,this.carsList$.subscribe(r=>{r.forEach(s=>this.addCustomMarker(s))}))})}closeInfoWindow(){this.mapInfoWindow?.close()}goToProductPage(o){console.log("goToProductPage "+o.name)}addCustomMarker(o){const e=new M(o.coordinates);new f(e,`<div>${o.price} z\u0142</div>`,s=>{this.selectedCar=o,this.mapInfoWindow?.open(s),this.changeDetectorRef.detectChanges()}).setMap(this.mapInstance)}static#t=this.\u0275fac=function(e){return new(e||n)(t.Y36(u.M),t.Y36(t.sBO))};static#n=this.\u0275cmp=t.Xpm({type:n,selectors:[["winder-map"]],viewQuery:function(e,c){if(1&e&&t.Gf(P,5),2&e){let r;t.iGM(r=t.CRH())&&(c.mapInfoWindow=r.first)}},decls:4,vars:4,consts:[[3,"options","width","height","mapClick","mapInitialized"],["infoWindow","mapInfoWindow"],[3,"product","click"]],template:function(e,c){1&e&&(t.TgZ(0,"google-map",0),t.NdJ("mapClick",function(){return c.closeInfoWindow()})("mapInitialized",function(s){return c.mapInstance$.next(s)}),t.TgZ(1,"map-info-window",null,1)(3,"ui-kit-product-card",2),t.NdJ("click",function(){return c.goToProductPage(c.selectedCar)}),t.qZA()()()),2&e&&(t.Q6J("options",c.mapOptions)("width","100%")("height","100%"),t.xp6(3),t.Q6J("product",c.selectedCar))},dependencies:[d.Yc,l.b6,l.ch],styles:[".default-theme[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .default-theme[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%], .default-theme[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%], .default-theme[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%], .default-theme[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%], .default-theme[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#121218}.default-theme[_ngcontent-%COMP%]   p.accent[_ngcontent-%COMP%], .default-theme[_ngcontent-%COMP%]   h1.accent[_ngcontent-%COMP%], .default-theme[_ngcontent-%COMP%]   h2.accent[_ngcontent-%COMP%], .default-theme[_ngcontent-%COMP%]   h3.accent[_ngcontent-%COMP%], .default-theme[_ngcontent-%COMP%]   h4.accent[_ngcontent-%COMP%], .default-theme[_ngcontent-%COMP%]   span.accent[_ngcontent-%COMP%]{color:#4cc2ff}.dark-theme[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .dark-theme[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%], .dark-theme[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%], .dark-theme[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%], .dark-theme[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%], .dark-theme[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#fff}.dark-theme[_ngcontent-%COMP%]   p.accent[_ngcontent-%COMP%], .dark-theme[_ngcontent-%COMP%]   h1.accent[_ngcontent-%COMP%], .dark-theme[_ngcontent-%COMP%]   h2.accent[_ngcontent-%COMP%], .dark-theme[_ngcontent-%COMP%]   h3.accent[_ngcontent-%COMP%], .dark-theme[_ngcontent-%COMP%]   h4.accent[_ngcontent-%COMP%], .dark-theme[_ngcontent-%COMP%]   span.accent[_ngcontent-%COMP%]{color:#4cc2ff}.dark-theme[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{background-color:#000}.dark-theme[_ngcontent-%COMP%]   div.accent[_ngcontent-%COMP%]{color:#4cc2ff}input.reset-styles[_ngcontent-%COMP%]{outline:none;border:none;width:100%}button.reset-styles[_ngcontent-%COMP%]{background:transparent;outline:none;border:none;padding:0}  .winders-custom-marker{position:absolute;background-color:#fff;width:-moz-fit-content;width:fit-content;padding:5px 10px;border-radius:20px;cursor:pointer;font-weight:500}  .winders-custom-marker:hover,   .winders-custom-marker:active,   .winders-custom-marker:focus{background-color:#000;color:#fff}  .info-window-background{position:absolute;inset:0;z-index:1}ui-kit-product-card[_ngcontent-%COMP%]{cursor:pointer}"]})}return n})();const _=(n,a)=>a.id;function k(n,a){1&n&&t._UZ(0,"ui-kit-product-card",4),2&n&&t.Q6J("product",a.$implicit)}const v=[{path:"",component:(()=>{class n{constructor(o){this.productService=o,this.productsList$=this.productService.getProducts()}static#t=this.\u0275fac=function(e){return new(e||n)(t.Y36(u.M))};static#n=this.\u0275cmp=t.Xpm({type:n,selectors:[["winder-search"]],decls:8,vars:2,consts:[[1,"page-wrapper"],[1,"search-results"],[1,"products-list-wrapper"],[1,"map-wrapper"],[3,"product"]],template:function(e,c){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2),t.SjG(3,k,1,1,"ui-kit-product-card",4,_),t.ALo(5,"async"),t.qZA(),t.TgZ(6,"div",3),t._UZ(7,"winder-map"),t.qZA()()()),2&e&&(t.xp6(3),t.wJu(t.lcZ(5,0,c.productsList$)))},dependencies:[d.Yc,O,p.Ov],styles:[".search-results[_ngcontent-%COMP%]{height:100vh;display:flex;overflow:hidden}.search-results[_ngcontent-%COMP%]   .products-list-wrapper[_ngcontent-%COMP%]{flex:3;display:flex;flex-wrap:wrap;justify-content:space-between;gap:15px;overflow-y:auto;overflow-x:hidden;padding:30px}.search-results[_ngcontent-%COMP%]   .map-wrapper[_ngcontent-%COMP%]{flex:2}"]})}return n})()}];let w=(()=>{class n{static#t=this.\u0275fac=function(e){return new(e||n)};static#n=this.\u0275mod=t.oAB({type:n});static#e=this.\u0275inj=t.cJS({imports:[m.Bz.forChild(v),m.Bz]})}return n})(),y=(()=>{class n{static#t=this.\u0275fac=function(e){return new(e||n)};static#n=this.\u0275mod=t.oAB({type:n});static#e=this.\u0275inj=t.cJS({imports:[p.ez,w,d.$X,l.Y4]})}return n})()}}]);